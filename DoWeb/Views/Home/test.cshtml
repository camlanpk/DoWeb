@model DoWeb.Models.KHUONEP  <link href="~/Content/MyStyle.css" rel="stylesheet" />  <script src="~/Scripts/MyScript.js"></script>  <!------------------------------------------------> <!----------------------------- CHỈNH THÀNH CSS KHÔNG DÙNG TRONG HÀM -------------------> <!----------------------------- THÊM ACTION XỬ LÝ CHO CrEATE---------------------------->  <!----------------------------- ĐỔI THÀNH TÌM KIẾM khuon, may, nguyen lieu------------------->  <div class="modal-header">     <h4 class="modal-title">Thông tin lên khuôn ép</h4>     <button type="button" class="close custom-close btn-close" onclick="$('#formModal').modal('hide')" aria-label="Đóng" style="margin-right: 4px"></button> </div> @using (Html.BeginForm("Create", "KhuonEp", FormMethod.Post)) {<div class="modal-body">     <div class="form-group row">         <label class="col-md-1 col-form-label">Tên khuôn lên</label>     <div class="col-md-4 ">             @Html.DropDownListFor(model => model.MaKhuon, (SelectList)ViewBag.KhuonList, "-Chọn Khuôn-", new { @class = "form-control select2" })          </div>     <label class="col-md-1 col-form-label">Hot runner</label>     <div class="col-md-4">         <div class="form-check form-check-inline">             @Html.RadioButtonFor(model => model.HotRunner, 1, new { @class = "form-check-input", id = "HotRunner_Co" })             <label class="form-check-label">Có</label>         </div>         <div class="form-check form-check-inline">             @Html.RadioButtonFor(model => model.HotRunner, 0, new { @class = "form-check-input", id = "HotRunner_Khong" })             <label class="form-check-label">Không</label>         </div>     </div>         @*<div class="form-group" style="width: 300px;">             <input type="text" id="searchMayKhuon" class="form-control" placeholder="Nhập tên máy khuôn..." />         </div>          <select id="mayKhuonDropdown" class="form-control select2" style="width: 300px; display:none;">         </select>*@     </div>     <div class="form-group row">         <label class="col-md-1 col-form-label">Tên máy</label>         <div class="col-md-4">             @Html.DropDownListFor(model => model.MaMayKhuon, (SelectList)ViewBag.MayList, "-Chọn Máy-", new { @class = "form-control select2" })         </div>         <label class="col-md-1 col-form-label">Tìm kiếm</label>         <div class="col-md-4">             @Html.EditorFor(model => model.MayKhuon.TenMayKhuon, new { htmlAttributes = new { placeholder = "Tên khuôn xuống" } })         </div>     </div>     <hr />     <div class="form-group row">         <label class="col-md-1 col-form-label">NGUYÊN LIỆU</label>         <div class="col-md-4">             @Html.DropDownList("Nlieulist", (SelectList)ViewBag.Nlieulist, "Chọn nguyên liệu", new { @class = "form-control select2" })         </div>         <label class="col-md-1 col-form-label">Mã số</label>         <div class="col-md-2">             @Html.EditorFor(model => model.NGUYENLIEU.ID, new { htmlAttributes = new { placeholder = "Mã nguyên liệu", style = "max-width: 100px" } })         </div>         <label class="col-md-2 col-form-label">Tỉ lệ phế trộn (%)</label>         <div class="col-md-2">             @Html.EditorFor(model => model.NGUYENLIEU.TiLePheTron, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", min = "0", max = "100", placeholder = "" } })         </div>     </div>     <hr />     <div class="form-group row">         <label class="col-form-label">TRỌNG LƯỢNG (gr)</label>         <label class="col-md-1 col-form-label">chuẩn</label>         <div class="col-md-2">             @Html.EditorFor(model => model.TRONGLUONG.Chuan, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1 col-form-label">Thực tế</label>         <div class="col-md-2">             @Html.EditorFor(model => model.TRONGLUONG.ThucTe, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1 col-form-label">Chênh lệch</label>         <div class="col-md-2">             @Html.EditorFor(model => model.TRONGLUONG.ChenhLech, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>          <label class="col-form-label">Lý do lệch</label>         <div>             @Html.EditorFor(model => model.TRONGLUONG.LyDoLech, new { htmlAttributes = new { @class = "", style = "width: 700px", type = "text", placeholder = "" } })         </div>         <label class="col-form-label">Biện pháp xử lý</label>         <div>             @Html.EditorFor(model => model.TRONGLUONG.ThucTe, new { htmlAttributes = new { @class = "", style = "width: 700px", type = "text", placeholder = "" } })         </div>         <label class="col-form-label">Điểm đạt</label>         <div class="col-md-2">             @Html.EditorFor(model => model.TRONGLUONG.ChamDiem, new { htmlAttributes = new { @class = "inputNumber", style = "max-width: 60px", type = "number", min = 0, max = 5, placeholder = "" } })         </div>         <label class="col-md-2">/5 điểm</label>     </div>     <hr />     <div class="form-group row">         <label>CHU KỲ NĂNG XUẤT</label>         <label class="col-md-1 col-form-label">chuẩn</label>         <div class="col-md-2">             @Html.EditorFor(model => model.CHUKYNANGSUAT.Chuan, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1 col-form-label">Thực tế</label>         <div class="col-md-2">             @Html.EditorFor(model => model.CHUKYNANGSUAT.ThucTe, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1 col-form-label">Chênh lệch</label>         <div class="col-md-2">             @Html.EditorFor(model => model.CHUKYNANGSUAT.ChenhLech, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <div class="form-group">             <label class="col-md-2 col-form-label">Lý do lệch</label>             @Html.EditorFor(model => model.CHUKYNANGSUAT.LyDoLech, new { htmlAttributes = new { @class = "", style = "width: 700px", type = "text", placeholder = "" } })         </div>         <div class="form-group">             <label class="col-md-2 col-form-label">Biện pháp xử lý</label>             @Html.EditorFor(model => model.CHUKYNANGSUAT.BienPhap, new { htmlAttributes = new { @class = "", style = "width: 700px", type = "text", placeholder = "" } })         </div>         <div class="form-group row">             <label class="col-form-label">Điểm đạt</label>             <div class="col-md-2">                 @Html.EditorFor(model => model.CHUKYNANGSUAT.ChamDiem, new { htmlAttributes = new { @class = "", style = "max-width: 50px", type = "number", min = 0, max = 5, placeholder = "" } })             </div>             <label class="col-md-2">/5 điểm</label>         </div>     </div>     <hr />     <div class="form-group row">         <label col-md-2 col-form-label>MÁY LẠNH</label>         <div class="col-md-3">             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.MayLanhHD, 1, new { @class = "form-check-input", id = "MLHD_Co" })                 <label class="form-check-label">Có</label>             </div>             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.MayLanhHD, 0, new { @class = "form-check-input", id = "MLHD_Khong" })                 <label class="form-check-label">Không</label>             </div>         </div>         <label class="col-md-1 col-form-label">Nhiệt độ</label>         <div class="col-md-2">             @Html.EditorFor(model => model.NhietDoML, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", max = 30, placeholder = "" } })         </div>     </div>     <hr />     <div class="form-group row">         <label class="col-form-label">TAY ROBOT</label>         <div class="col-md-3">             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.TayRobotHD, 1, new { @class = "form-check-input", id = "TayRobot_Co" })                 <label class="form-check-label">Có</label>             </div>             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.TayRobotHD, 0, new { @class = "form-check-input", id = "TayRobot_Khong" })                 <label class="form-check-label">Không</label>             </div>         </div>         <label class="col-md-1 col-form-label">Cảm biến</label>         <div class="col-md-3">             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.CamBienTRB, 0, new { @class = "form-check-input", id = "CamBienTayRobot_Co" })                 <label class="form-check-label">Có</label>             </div>             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.CamBienTRB, 1, new { @class = "form-check-input", id = "CamBienTayRobot_Khong" })                 <label class="form-check-label">Không</label>             </div>         </div>          <label class="col-md-1 col-form-label">Bắt tín hiệu khuôn</label>         <div class="col-md-3">             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.TinHieuTRB, 1, new { @class = "form-check-input", id = "THTayRobot_Co" })                 <label class="form-check-label">Có</label>             </div>             <div class="form-check form-check-inline">                 @Html.RadioButtonFor(m => m.TinHieuTRB, 0, new { @class = "form-check-input", id = "THTayRobot_Khong" })                 <label class="form-check-label">Không</label>             </div>         </div>     </div>     <hr />     <div class="form-group row">         <label>THỜI GIAN LÊN KHUÔN (Phút)</label>         <label class="col-md-1 col-form-label">chuẩn</label>         <div class="col-md-2">             @Html.EditorFor(model => model.THOIGIANLENKHUON.Chuan, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1 col-form-label">Thực tế</label>         <div class="col-md-2">             @Html.EditorFor(model => model.THOIGIANLENKHUON.ThucTe, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1 col-form-label">Chênh lệch</label>         <div class="col-md-2">             @Html.EditorFor(model => model.THOIGIANLENKHUON.ChenhLech, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <div class="form-group">             <label class="col-md-2 col-form-label">Lý do lệch</label>             @Html.EditorFor(model => model.THOIGIANLENKHUON.LyDoLech, new { htmlAttributes = new { @class = "", style = "width: 700px", type = "text", placeholder = "" } })         </div>         <div class="form-group">             <label class="col-md-2 col-form-label">Biện pháp xử lý</label>             @Html.EditorFor(model => model.THOIGIANLENKHUON.BienPhap, new { htmlAttributes = new { @class = "", style = "width: 700px", type = "text", placeholder = "" } })         </div>         <div class="form-group row">             <label class="col-form-label">Điểm đạt</label>             <div class="col-md-2">                 @Html.EditorFor(model => model.THOIGIANLENKHUON.ChamDiem, new { htmlAttributes = new { @class = "", style = "max-width: 60px", type = "number", min = 0, max = 5, placeholder = "" } })             </div>             <label class="col-md-2">/5 điểm</label>         </div>     </div>     <hr />     <div class="form-group row">         <label>PHẾ PHẨM</label>         <label class="col-md-2 col-form-label">Định mức (Shot)</label>         <div class="col-md-3">             @Html.EditorFor(model => model.PHEPHAM.DinhMuc, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-form-label">Phế xã</label>         <label class="col-md-2 col-form-label">Số lượng</label>         <div class="col-md-2">             @Html.EditorFor(model => model.PHEPHAM.SLPheXa, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-2 col-form-label">Số shot</label>         <div class="col-md-3">             @Html.EditorFor(model => model.PHEPHAM.SoShotPX, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-4 col-form-label">Phế xã ra hàng: </label>         <label class="col-md-2 col-form-label">Số shot</label>         <div class="col-md-2">             @Html.EditorFor(model => model.PHEPHAM.SoShotPRH, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>             <label class="col-md-2 col-form-label">Tổng</label>         <div class="col-md-2">             @Html.EditorFor(model => model.PHEPHAM.Tong, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-2">shot chênh lệch</label>         <div class="col-md-2">             @Html.EditorFor(model => model.PHEPHAM.ChenhLech, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "number", placeholder = "" } })         </div>         <label class="col-md-1">shot</label>         <div class="form-group">             <label class="col-md-2 col-form-label">Lý do lệch</label>             @Html.EditorFor(model => model.PHEPHAM.LyDoLech, new { htmlAttributes = new { @class = "", style = "max-width: 700px", type = "text", placeholder = "" } })         </div>         <div class="form-group">             <label class="col-md-2 col-form-label">Biện pháp xử lý</label>             @Html.EditorFor(model => model.PHEPHAM.BienPhap, new { htmlAttributes = new { @class = "", style = "max-width: 700px", type = "text", placeholder = "" } })         </div>         <div class="form-group row">             <label class="col-form-label">Điểm đạt</label>             <div class="col-md-2">                 @Html.EditorFor(model => model.PHEPHAM.ChamDiem, new { htmlAttributes = new { @class = "", style = "max-width: 60px", type = "number", min = 0, max = 5, placeholder = "" } })             </div>             <label class="col-md-2">/5 điểm</label>         </div>     </div>      @*<div class="row align-items-center">                 <div class="col-md-2 d-flex flex-column">                     <div class="form-group mb-2">                         <label for="SoNVLenKhuon">a</label>                         @Html.TextBoxFor(model => model.SoNVLenKhuon, new { @class = "form-control text-end", @id = "a" })                     </div>                     <div class="form-group">                         <label for="SoNVDungMay">b</label>                         @Html.TextBoxFor(model => model.SoNVDungMay, new { @class = "form-control text-end", @id = "b" })                     </div>                 </div>                  <div class="col-md-2 d-flex justify-content-center align-items-center">                     <div class="form-group text-center">                         <label for="Tong">Tổng</label>                         <input type="text" id="Tong" class="form-control text-center" readonly />                     </div>                 </div>             </div>*@     <span></span>     <hr />     <div class="form-group row">         <label class="col-md-2 col-form-label">Số nhân viên kỹ thuật lên khuôn</label>         <div class="col-md-2">             @Html.EditorFor(model => model.SoNVLenKhuon, new { htmlAttributes = new { @class = "", style = "max-width: 60px", type = "number" } })         </div>         <label class="col-md-2 col-form-label">Số nhân viên đứng máy</label>         <div class="col-md-2">             @Html.EditorFor(model => model.SoNVDungMay, new { htmlAttributes = new { @class = "", style = "max-width: 60px", type = "number" } })         </div>         <div class="form-group row">             <label class="col-md-2 col-form-label">Tên KCS</label>             <div class="col-md-4">                 @Html.EditorFor(model => model.TenKCS, new { htmlAttributes = new { @class = "", style = "", type = "text" } })             </div>         </div>             <label class="col-md-2 col-form-label">Trung bình điểm đạt</label>         <div class="col-md-1-5">             @Html.EditorFor(model => model.DiemTB, new { htmlAttributes = new { @class = "", style = "max-width: 60px", type = "number", max = 5, min = 0 } })         </div>             <label class="col-md-2">/5 điểm</label>             <label class="col-md-2 col-form-label">Xếp loại</label>         <div class="col-md-2">              @Html.EditorFor(model => model.XepLoai, new { htmlAttributes = new { @class = "", style = "max-width: 100px", type = "text" } })             @*@Html.TextBoxFor(m => m.XepLoai, new { @class = "" })*@         </div>     </div>     <hr />     <div class="form-group">         <label>Ghi chú:</label>         <p class="small text-muted">             1 điểm: Kém; 2 điểm: Không đạt; 3 điểm: Trung bình; 4 điểm: Khá; 5 điểm: Giỏi         </p>     </div>     </div>} <div class="modal-footer">     <button type="submit" class="btn btn-success">         <i class="fa fa-check"></i> Lưu     </button>     <button type="button" class="btn btn-danger" onclick="$('#formModal').modal('hide')">         <i class="fa fa-times"></i> Đóng     </button> </div> }   <script>function closePopup() {         $("#formModal").modal("hide");      }</script>  <link href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet" />  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script> <!-- Gắn Select2 -->  <script>function closePopup() {         $("#formModal").modal("hide");                 function openPopup(url) {             $("#formModal .modal-content").load(url, function () {                 $("#formModal").modal("show");             });         }          $(document).on("submit", "form", function (e) {             e.preventDefault();             var form = $(this);             $.ajax({                 type: form.attr("method"),                 url: form.attr("action"),                 data: form.serialize(),                 success: function (res) {                     if (res.success) {                         location.reload();                     } else {                         $("#formModal .modal-content").html(res);                     }                 }             });         });</script>  <script src="~/Scripts/jquery-3.6.0.min.js"></script>  <script src="~/Scripts/select2.min.js"></script>  <link href="~/Content/select2.min.css" rel="stylesheet" />  <script>     $(document).ready(function () {         $('#searchMayKhuon').keypress(function (e) {             if (e.which === 13) {                 e.preventDefault();                 let searchText = $(this).val().trim();                  if (searchText.length === 0) {                     alert("Vui lòng nhập tên máy khuôn.");                     return;                 }                  $.ajax({                     url: '@Url.Action("SearchMayKhuon", "MayKhuon")',                     type: 'GET',                     data: { searchString: searchText },                     success: function (data) {                         let dropdown = $('#mayKhuonDropdown');                         dropdown.empty();                          if (data.length === 0) {                             dropdown.hide();                             alert("Không tìm thấy máy khuôn nào.");                             return;                         }                          $.each(data, function (i, item) {                             dropdown.append($('<option>', {                                 value: item.Id,                                 text: item.TenMayKhuon + " (" + item.Equipment + ")"                             }));                         });                          dropdown.show();                         dropdown.select2({                             placeholder: "Chọn máy khuôn",                             width: 'resolve'                         });                     },                     error: function () {                         alert("Lỗi khi tìm kiếm.");                     }                 });             }         });     }); </script> 